!function(t){t.fn.customScroll=function(o){return this.length?"destroy"===o?(this.each(function(){var i=t(this).data("custom-scroll");i&&i.destroy()}),this):1===this.length?e(this,o):void this.each(function(){e(t(this),o)}):t.extend(i,o)};var i={prefix:"custom-scroll_",barMinHeight:10,barMinWidth:10,offsetTop:0,offsetBottom:0,offsetLeft:0,offsetRight:0,trackWidth:10,trackHeight:10,barHtml:"<div />",vertical:!0,horizontal:!0,preventParentScroll:!0},o={dim:"height",Dim:"Height",dir:"top",Dir:"Top",dir2:"bottom",Dir2:"Bottom",clientAxis:"clientY",suffix:"-y"},r={dim:"width",Dim:"Width",dir:"left",Dir:"Left",dir2:"right",Dir2:"Right",clientAxis:"clientX",suffix:"-x"};function e(e,n){var s=e.data("custom-scroll");n=s?s.options:t.extend({},i,n);var l={},a={},c={x:+n.vertical,y:+n.horizontal};if(n.horizontal&&(l.x=r,a.x={}),n.vertical&&(l.y=o,a.y={}),e.hasClass(n.prefix+"container")&&s)return s.updateBars(),s;var d=e.children("."+n.prefix+"inner");d.length||(d=e.wrapInner('<div class="'+n.prefix+'inner"></div>').children()),e.addClass(n.prefix+"container");var h=t('<div class="'+n.prefix+'inner" />').width(100).height(100).appendTo("body").css({overflow:"scroll"})[0],f=h.offsetWidth-h.clientWidth,u=h.offsetHeight-h.clientHeight;h.parentElement.removeChild(h),n.vertical?(d.css({paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),marginRight:-f+"px"}),e.css({paddingLeft:0,paddingRight:0})):d.css({overflowY:"hidden"}),n.horizontal?(d.css({marginBottom:-u+"px",paddingBottom:u+"px"}),e.css({paddingTop:0,paddingBottom:0})):d.css({overflowX:"hidden"});var p=e.css("maxHeight");parseInt(p)&&(e.css("maxHeight","none"),d.css("maxHeight",p)),e.scrollTop(0);var m=t("body"),v={};t.each(l,function(i,o){e["scroll"+o.Dir](0);var r=n.prefix+"bar"+o.suffix,s=e.children("."+r);s.length||(s=t(n.barHtml).addClass(r).appendTo(e));s.on("mousedown touchstart",function(t){t.preventDefault();var r=d["scroll"+o.Dir](),e=t[o.clientAxis]||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0][o.clientAxis],n=x(i,o).ratio;m.on("mousemove.custom-scroll touchmove.custom-scroll",function(t){t.preventDefault();var i=t[o.clientAxis]||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0][o.clientAxis];d["scroll"+o.Dir](r+(i-e)/n)}),m.on("mouseup.custom-scroll touchend.custom-scroll",function(){m.off(".custom-scroll")})}),v[i]=s}),d.on("scroll",D),D(),n.preventParentScroll&&d.on("DOMMouseScroll mousewheel",function(i){var o=t(this),r=this.scrollTop,e=this.scrollHeight,n=o.height(),s="DOMMouseScroll"==i.type?-40*i.originalEvent.detail:i.originalEvent.wheelDelta,l=s>0;(l?0===r:r===e-n)&&i.preventDefault()});var g={$container:e,$bar:v.y,$barX:v.x,$inner:d,destroy:function(){t.each(l,function(t){v[t].remove()}),e.removeClass(n.prefix+"container").removeData("custom-scroll").css({padding:"",maxHeight:""}),d.contents().appendTo(e),d.remove()},updateBars:D,options:n};return e.data("custom-scroll",g),g;function x(t,i){var o=0|d.prop("scroll"+i.Dim),r=e["inner"+i.Dim](),s=d["inner"+i.Dim](),l=r-n["offset"+i.Dir]-n["offset"+i.Dir2];c["x"==t?"y":"x"]||(l-=n["track"+i.Dim]);var a=Math.max(l*r/o|0,n["barMin"+i.Dim]);return{ratio:(l-a)/(o-s),dim:r,scroll:l,total:o,bar:a}}function D(){t.each(l,b)}function b(t,i){var o=x(t,i);if(o.total){var r=d["scroll"+i.Dir]();if(a[t].scrollPos!==r||a[t].scroll!==o.scroll||a[t].total!==o.total){a[t]=o,a[t].scrollPos=r;var s=o.bar>=o.scroll;s!==c[t]&&(e.toggleClass(n.prefix+"hidden"+i.suffix,s),c[t]=s);var l=r*o.ratio;l<0&&(l=0),l>o.scroll-o.bar&&(l=o.scroll-o.bar),v[t][i.dim](o.bar).css(i.dir,n["offset"+i.Dir]+l)}}}}}(jQuery);